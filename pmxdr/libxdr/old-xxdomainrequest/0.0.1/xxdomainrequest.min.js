/*
@source http://code.eligrey.com/pmxdr/xxdomainrequest/0.0.1/xxdomainrequest.js
*/
if(!this.XDomainRequest){this.XDomainRequest=new Function();XDomainRequest.defaultTimeout=10000;XDomainRequest.prototype={open:function(b,a){this.request={method:b,uri:a,headers:{}}},setRequestHeader:function(b,a){this.request.headers[b.toLowerCase()]=a},removeRequestHeader:function(a){delete this.request.headers[a.toLowerCase()]},send:function(c){var a=this;a.request.data=c;a.request.callback=function(f){a.readyState=4;if(f.error){if(f.error=="DISALLOWED_REQUEST_METHOD"){a.status=405;a.statusText="Method Not Allowed"}else{if(f.error=="TIMEOUT"){a.status=408;a.statusText="Request Timeout"}else{if(f.error=="DISALLOWED_ORIGIN"){a.status=412;a.statusText="Precondition Failed"}}}}else{if(f.status){a.status=f.status}if(f.statusText){a.statusText=f.statusText}}if(!a.status){a.status=200}if(typeof a.onerror=="function"&&f.error){return a.onerror()}if(typeof a.ontimeout=="function"&&a.status==408){return a.ontimeout()}var d;try{d=(new DOMParser()).parseFromString(f.data,"application/xml")}catch(g){}a.responseXML=d;a.responseText=f.data;a.contentType=f.headers["content-type"];var h=[];for(var i in f.headers){if(f.headers.hasOwnProperty(i)){h.push(i+": "+f.headers[i])}}h=h.join("\r\n");a.getAllResponseHeaders=function(){return h};a.getResponseHeader=function(e){return f.headers[e.toLowerCase()]||null};if(a.timeout){a.request.timeout=a.timeout}else{if(XDomainRequest.defaultTimeout){a.request.timeout=XDomainRequest.defaultTimeout}}if(typeof a.onreadystatechange=="function"){a.onreadystatechange()}if(typeof a.onprogress=="function"){a.onprogress()}if(typeof a.onload=="function"){a.onload()}};var b=pmxdr.request(a.request).abort;a.abort=function(){b();if(typeof a.onabort=="function"){a.onabort()}}},abort:function(){delete this.request;if(typeof this.onabort=="function"){this.onabort()}}}};
