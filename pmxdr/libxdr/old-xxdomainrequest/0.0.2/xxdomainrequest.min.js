/*
@source http://code.eligrey.com/pmxdr/xxdomainrequest/0.0.2/xxdomainrequest.js
*/
if(this.XDomainRequest){(function(){function b(d){return"XDomainRequest: "+d+"() is not supported."}var a={status:200,statusText:"OK",readyState:4,setRequestHeader:function(){throw new RangeError(b("setRequestHeader"))},getResponseHeader:function(){throw new RangeError(b("getResponseHeader"))},getAllResponseHeaders:function(){throw new RangeError(b("getAllResponseHeaders"))},};if(Object.defineProperty){Object.defineProperty(XDomainRequest.prototype,"onreadystatechange",{get:function(){return this.onload},set:function(d){return this.onload=d}});Object.defineProperty(XDomainRequest.prototype,"responseXML",{get:function(){var f=null;try{f=new ActiveXObject("Microsoft.XMLDOM");f.loadXML(this.responseText)}catch(d){try{f=(new DOMParser()).parseFromString(this.responseText,"application/xml")}catch(d){}}if(f){return f}}})}for(var c in a){if(a.hasOwnProperty(c)){XDomainRequest.prototype[c]=a[c]}}})()}else{if(!this.XDomainRequest){this.XDomainRequest=new Function();XDomainRequest.defaultTimeout=10000;XDomainRequest.prototype={open:function(b,a){this.request={method:b,uri:a,headers:{}}},setRequestHeader:function(b,a){this.request.headers[b.toLowerCase()]=a},removeRequestHeader:function(a){delete this.request.headers[a.toLowerCase()]},send:function(c){var a=this;a.request.data=c;a.request.callback=function(d){a.readyState=4;if(d.error){if(d.error=="DISALLOWED_REQUEST_METHOD"){a.status=405;a.statusText="Method Not Allowed"}else{if(d.error=="TIMEOUT"){a.status=408;a.statusText="Request Timeout"}else{if(d.error=="DISALLOWED_ORIGIN"){a.status=412;a.statusText="Precondition Failed"}}}}else{if(d.status){a.status=d.status}if(d.statusText){a.statusText=d.statusText}}if(!a.status){a.status=200}if(typeof a.onerror=="function"&&d.error){return a.onerror()}if(typeof a.ontimeout=="function"&&a.status==408){return a.ontimeout()}var h=null;try{h=(new DOMParser()).parseFromString(d.data,"application/xml")}catch(f){}a.responseXML=xmlResponse;a.responseText=d.data;a.contentType=d.headers["content-type"];var g=[];for(var i in d.headers){if(d.headers.hasOwnProperty(i)){g.push(i+": "+d.headers[i])}}g=g.join("\r\n");a.getAllResponseHeaders=function(){return g};a.getResponseHeader=function(e){return d.headers[e.toLowerCase()]||null};if(a.timeout){a.request.timeout=a.timeout}else{if(XDomainRequest.defaultTimeout){a.request.timeout=XDomainRequest.defaultTimeout}}if(typeof a.onreadystatechange=="function"){a.onreadystatechange()}if(typeof a.onprogress=="function"){a.onprogress()}if(typeof a.onload=="function"){a.onload()}};var b=pmxdr.request(a.request).abort;a.abort=function(){b()}},abort:function(){delete this.request}}}};
