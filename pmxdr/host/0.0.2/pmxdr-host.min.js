/*
@source http://code.eligrey.com/pmxdr/host/0.0.2/pmxdr-host.js
*/
if(!Array.prototype.filter){Array.prototype.filter=function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var d=new Array();for(var c=0;c<a;c++){if(c in this){if(b(this[c],c,this)){d.push(val)}}}return d}}(function(){var b=[];if(typeof window.opera!="undefined"){if(parseInt(window.opera.version())==9){Event.prototype.__defineGetter__("origin",function(){return"http://"+this.domain})}}function a(n){var d=false,m=n.origin,h=JSON.parse(n.data),e=[],l=false;if(h.pmxdr==true){function g(r){var q={pmxdr:true,error:r};if(h.id){q.id=h.id}n.source.postMessage(JSON.stringify(q),m)}if(b.length>=1){b.forEach(function(q){if(q instanceof RegExp){d=q.test(n.origin)}else{if(typeof q=="string"){d=(m==q)}}})}if(typeof h.method=="string"){h.method=h.method.toUpperCase()}var j=new XMLHttpRequest();j.open(h.method,h.uri,false);if(h.headers){for(var i in h.headers){if(h.headers.hasOwnProperty(i)){j.setRequestHeader(i,h.headers[i]);e.push(i.toLowerCase())}}}if(typeof h.data=="string"){j.send(h.data)}else{j.send(null)}if(j.status==200){function p(q){return j.getResponseHeader(q)}var o={origin:(p("Access-Control-Allow-Origin")||"").replace(/\s/g,""),methods:(p("Access-Control-Allow-Methods")||"").replace(/\s/g,""),headers:(p("Access-Control-Allow-Headers")||"").replace(/\s/g,"")};if(d==true||o.origin=="*"||o.origin.indexOf(m)!=-1){if(!o.methods||o.methods=="*"||(typeof o.methods=="string"&&o.methods.indexOf(h.method)!=-1)){var c=true;if(h.headers&&o.headers){var k=o.headers.toLowerCase().split(",");e.filter(function(q){return q.substr(0,2)=="x-"}).forEach(function(q){c=(k.indexOf(q)!=-1)})}if(c){var f={pmxdr:true,contentType:p("Content-Type"),lastModified:p("Last-Modified"),expires:p("Expires"),data:j.responseText,headers:{}};if(typeof h.id!="undefined"){f.id=h.id}if(Object.prototype.toString.call(h.getHeaders)=="[object Array]"){h.getHeaders.forEach(function(q){f.headers[q.toLowerCase()]=p(q)})}return n.source.postMessage(JSON.stringify(f),m)}else{return g("DISALLOWED_HEADERS")}}else{return g("DISALLOWED_REQUEST_METHOD")}}else{return g("DISALLOWED_ORIGIN")}}else{return g("LOAD_ERROR")}return g("UNKNOWN")}}if(window.addEventListener){window.addEventListener("message",a,false)}else{if(window.attachEvent){window.attachEvent("onmessage",a)}}})();if(typeof JSON=="undefined"){eval(function(h,b,i,d,g,f){g=function(a){return(a<b?"":g(parseInt(a/b)))+((a=a%b)>35?String.fromCharCode(a+29):a.toString(36))};if(!"".replace(/^/,String)){while(i--){f[g(i)]=d[i]||g(i)}d=[function(a){return f[a]}];g=function(){return"\\w+"};i=1}while(i--){if(d[i]){h=h.replace(new RegExp("\\b"+g(i)+"\\b","g"),d[i])}}return h}('3(!l.m){m={}}(5(){5 f(n){7 n<10?"0"+n:n}3(6 V.q.p!=="5"){V.q.p=5(a){7 l.1o()+"-"+f(l.1p()+1)+"-"+f(l.1q())+"T"+f(l.1r())+":"+f(l.1s())+":"+f(l.1t())+"Z"};L.q.p=1u.q.p=1v.q.p=5(a){7 l.1w()}}w e=/[\\1x\\W\\X-\\Y\\11\\12\\13\\14-\\15\\17-\\18\\19-\\1a\\1b\\1c-\\1d]/g,G=/[\\\\\\"\\1y-\\1z\\1A-\\1B\\W\\X-\\Y\\11\\12\\13\\14-\\15\\17-\\18\\19-\\1a\\1b\\1c-\\1d]/g,8,y,1e={"\\b":"\\\\b","\\t":"\\\\t","\\n":"\\\\n","\\f":"\\\\f","\\r":"\\\\r",\'"\':\'\\\\"\',"\\\\":"\\\\\\\\"},o;5 H(b){G.1f=0;7 G.M(b)?\'"\'+b.z(G,5(a){w c=1e[a];7 6 c==="I"?c:"\\\\u"+("1g"+a.1h(0).N(16)).1i(-4)})+\'"\':\'"\'+b+\'"\'}5 A(a,b){w i,k,v,h,B=8,9,2=b[a];3(2&&6 2==="x"&&6 2.p==="5"){2=2.p(a)}3(6 o==="5"){2=o.J(b,a,2)}1C(6 2){C"I":7 H(2);C"O":7 1D(2)?L(2):"D";C"1E":C"D":7 L(2);C"x":3(!2){7"D"}8+=y;9=[];3(P.q.N.1F(2)==="[x 1G]"){h=2.h;E(i=0;i<h;i+=1){9[i]=A(i,2)||"D"}v=9.h===0?"[]":8?"[\\n"+8+9.K(",\\n"+8)+"\\n"+B+"]":"["+9.K(",")+"]";8=B;7 v}3(o&&6 o==="x"){h=o.h;E(i=0;i<h;i+=1){k=o[i];3(6 k==="I"){v=A(k,2);3(v){9.1j(H(k)+(8?": ":":")+v)}}}}Q{E(k 1k 2){3(P.1l.J(2,k)){v=A(k,2);3(v){9.1j(H(k)+(8?": ":":")+v)}}}}v=9.h===0?"{}":8?"{\\n"+8+9.K(",\\n"+8)+"\\n"+B+"}":"{"+9.K(",")+"}";8=B;7 v}}3(6 m.R!=="5"){m.R=5(a,b,c){w i;8="";y="";3(6 c==="O"){E(i=0;i<c;i+=1){y+=" "}}Q{3(6 c==="I"){y=c}}o=b;3(b&&6 b!=="5"&&(6 b!=="x"||6 b.h!=="O")){1m 1n 1H("m.R")}7 A("",{"":a})}}3(6 m.S!=="5"){m.S=5(c,d){w j;5 U(a,b){w k,v,2=a[b];3(2&&6 2==="x"){E(k 1k 2){3(P.1l.J(2,k)){v=U(2,k);3(v!==1I){2[k]=v}Q{1J 2[k]}}}}7 d.J(a,b,2)}e.1f=0;3(e.M(c)){c=c.z(e,5(a){7"\\\\u"+("1g"+a.1h(0).N(16)).1i(-4)})}3(/^[\\],:{}\\s]*$/.M(c.z(/\\\\(?:["\\\\\\/1K]|u[0-1L-1M-F]{4})/g,"@").z(/"[^"\\\\\\n\\r]*"|1N|1O|D|-?\\d+(?:\\.\\d*)?(?:[1P][+\\-]?\\d+)?/g,"]").z(/(?:^|:|,)(?:\\s*\\[)+/g,""))){j=1Q("("+c+")");7 6 d==="5"?U({"":j},""):j}1m 1n 1R("m.S")}}})();',62,116,"||value|if||function|typeof|return|gap|partial||||||||length||||this|JSON||rep|toJSON|prototype||||||var|object|indent|replace|str|mind|case|null|for||escapable|quote|string|call|join|String|test|toString|number|Object|else|stringify|parse||walk|Date|u00ad|u0600|u0604|||u070f|u17b4|u17b5|u200c|u200f||u2028|u202f|u2060|u206f|ufeff|ufff0|uffff|meta|lastIndex|0000|charCodeAt|slice|push|in|hasOwnProperty|throw|new|getUTCFullYear|getUTCMonth|getUTCDate|getUTCHours|getUTCMinutes|getUTCSeconds|Number|Boolean|valueOf|u0000|x00|x1f|x7f|x9f|switch|isFinite|boolean|apply|Array|Error|undefined|delete|bfnrt|9a|fA|true|false|eE|eval|SyntaxError".split("|"),0,{}))};
